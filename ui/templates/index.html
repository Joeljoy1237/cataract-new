<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cataract AI Diagnostic</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="app-container">
      <header>
        <h1>
          <span class="pulse">üëÅÔ∏è</span> Cataract<span class="highlight"
            >AI</span
          >
        </h1>
        <p>Advanced Deep Learning Diagnostics</p>
      </header>

      <main>
        <!-- Fundus Section -->
        <section class="analysis-section">
          <h2 style="margin-bottom: 2rem; color: var(--primary)">
            Fundus Image Analysis
          </h2>
          <div class="glass-panel">
            <div class="upload-section" id="drop-zone">
              <input type="file" id="file-input" accept="image/*" hidden />
              <div class="upload-content">
                <div class="icon" style="color: var(--primary)">üì§</div>
                <h3>Upload Fundus Image</h3>
                <p>Drag & Drop or Click to Browse</p>
              </div>
            </div>

            <div class="loader hidden" id="loader">
              <div class="scanner">
                <div class="scanner-bar default-bar"></div>
              </div>
              <p>Analyzing Retinal Structures...</p>
            </div>

            <div class="results-section hidden" id="results">
              <div class="pipeline-view">
                <div class="step">
                  <span>Original</span>
                  <img id="img-original" src="" alt="Original" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Green Channel</span>
                  <img id="img-green" src="" alt="Green Channel" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Denoised</span>
                  <img id="img-denoised" src="" alt="Denoised" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Enhanced (CLAHE)</span>
                  <img id="img-clahe" src="" alt="CLAHE" />
                </div>
              </div>

              <div class="diagnosis-container">
                <div
                  class="diagnosis-card"
                  style="border-color: var(--primary)"
                >
                  <h2>Diagnosis Result</h2>
                  <div class="status" id="diagnosis-text">--</div>
                  <div class="confidence">
                    Confidence: <span id="confidence-score">--</span>
                  </div>
                </div>
              </div>

              <button class="reset-btn" onclick="resetFundus()">
                Analyze Another
              </button>
            </div>
          </div>
        </section>

        <!-- Fundus Multi-Class Section -->
        <section class="analysis-section">
          <h2 style="margin-bottom: 2rem; color: #9c27b0">
            Fundus Multi-Class Analysis
          </h2>
          <div class="glass-panel">
            <div class="upload-section" id="drop-zone-multi">
              <input
                type="file"
                id="file-input-multi"
                accept="image/*"
                hidden
              />
              <div class="upload-content">
                <div class="icon" style="color: #9c27b0">‚öñÔ∏è</div>
                <h3>Upload Fundus Image</h3>
                <p>Drag & Drop or Click to Browse</p>
              </div>
            </div>

            <div class="loader hidden" id="loader-multi">
              <div class="scanner" style="background: rgba(156, 39, 176, 0.1)">
                <div
                  class="scanner-bar"
                  style="background: #9c27b0; box-shadow: 0 0 15px #9c27b0"
                ></div>
              </div>
              <p>Classifying Severity...</p>
            </div>

            <div class="results-section hidden" id="results-multi">
              <div class="pipeline-view">
                <div class="step">
                  <span>Original</span>
                  <img id="multi-img-original" src="" alt="Original" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Green Channel</span>
                  <img id="multi-img-green" src="" alt="Green Channel" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Denoised</span>
                  <img id="multi-img-denoised" src="" alt="Denoised" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Enhanced (CLAHE)</span>
                  <img id="multi-img-clahe" src="" alt="CLAHE" />
                </div>
              </div>

              <div class="diagnosis-container">
                <div class="diagnosis-card" style="border-color: #9c27b0">
                  <h2>Assessment</h2>
                  <div class="status" id="multi-diagnosis-text">--</div>
                  <!-- Metrics Grid -->
                  <div class="metrics-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; font-size: 0.9rem;">
                      <div class="metric-item">
                          <span style="display:block; color: #aaa; font-size: 0.8rem;">Accuracy</span>
                          <span id="multi-acc" style="font-weight: bold; color: #fff;">--</span>
                      </div>
                      <div class="metric-item">
                          <span style="display:block; color: #aaa; font-size: 0.8rem;">Precision</span>
                          <span id="multi-prec" style="font-weight: bold; color: #fff;">--</span>
                      </div>
                      <div class="metric-item">
                          <span style="display:block; color: #aaa; font-size: 0.8rem;">Recall</span>
                          <span id="multi-rec" style="font-weight: bold; color: #fff;">--</span>
                      </div>
                      <div class="metric-item">
                          <span style="display:block; color: #aaa; font-size: 0.8rem;">F1-Score</span>
                          <span id="multi-f1" style="font-weight: bold; color: #fff;">--</span>
                      </div>
                  </div>
                </div>
              </div>

              <button
                class="reset-btn"
                style="color: #9c27b0; border-color: #9c27b0"
                onclick="resetMulti()"
              >
                Analyze Another
              </button>
            </div>
          </div>
        </section>

        <!-- Slit-Lamp Section -->
        <section class="analysis-section">
          <h2 style="margin-bottom: 2rem; color: var(--secondary)">
            Slit-Lamp Image Analysis
          </h2>
          <div class="glass-panel">
            <div class="upload-section" id="drop-zone-slit">
              <input type="file" id="file-input-slit" accept="image/*" hidden />
              <div class="upload-content">
                <div class="icon" style="color: var(--secondary)">üëÅÔ∏è</div>
                <h3>Upload Slit-Lamp Image</h3>
                <p>Drag & Drop or Click to Browse</p>
              </div>
            </div>

            <div class="loader hidden" id="loader-slit">
              <div class="scanner" style="background: rgba(255, 255, 255, 0.1)">
                <div
                  class="scanner-bar"
                  style="
                    background: var(--secondary);
                    box-shadow: 0 0 15px var(--secondary);
                  "
                ></div>
              </div>
              <p>Analyzing Anterior Segment...</p>
            </div>

            <div class="results-section hidden" id="results-slit">
              <div class="pipeline-view">
                <div class="step">
                  <span>Original</span>
                  <img id="slit-img-original" src="" alt="Original" />
                </div>
                <div class="arrow">‚ûî</div>

                <div class="step">
                  <span>Denoised</span>
                  <img id="slit-img-denoised" src="" alt="Denoised" />
                </div>
                <div class="arrow">‚ûî</div>
                <div class="step">
                  <span>Enhanced (CLAHE)</span>
                  <img id="slit-img-clahe" src="" alt="CLAHE" />
                </div>
              </div>

              <div class="diagnosis-container">
                <div
                  class="diagnosis-card"
                  style="border-color: var(--secondary)"
                >
                  <h2>Diagnosis Result</h2>
                  <div class="status" id="slit-diagnosis-text">--</div>
                  <div class="confidence">
                    Confidence: <span id="slit-confidence-score">--</span>
                  </div>
                </div>
              </div>

              <button
                class="reset-btn"
                style="color: var(--secondary); border-color: var(--secondary)"
                onclick="resetSlit()"
              >
                Analyze Another
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
